(this.webpackJsonpclassdio=this.webpackJsonpclassdio||[]).push([[0],{23:function(e){e.exports=JSON.parse('{"domain":"dev-g157vs9n.auth0.com","clientId":"UKitRgDQR62fZ605K3KX2O2HhF2Rrqv8"}')},25:function(e,t,a){},30:function(e,t,a){e.exports=a(43)},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),o=a.n(c),l=(a(25),a(8)),s=a.n(l),i=a(11),u=a(14),m=a(19),d=a(28),h=function(){return window.history.replaceState({},document.title,window.location.pathname)},p=r.a.createContext(),f=function(){return Object(n.useContext)(p)},v=function(e){var t=e.children,a=e.onRedirectCallback,c=void 0===a?h:a,o=Object(m.a)(e,["children","onRedirectCallback"]),l=Object(n.useState)(),f=Object(u.a)(l,2),v=f[0],b=f[1],g=Object(n.useState)(),E=Object(u.a)(g,2),y=E[0],w=E[1],j=Object(n.useState)(),O=Object(u.a)(j,2),k=O[0],S=O[1],N=Object(n.useState)(!0),C=Object(u.a)(N,2),x=C[0],D=C[1],R=Object(n.useState)(!1),q=Object(u.a)(R,2),T=q[0],A=q[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)(o);case 2:if(t=e.sent,S(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,n=a.appState,c(n);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,b(r),!r){e.next=19;break}return e.next=17,t.getUser();case 17:l=e.sent,w(l);case 19:D(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var F=function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},A(!0),e.prev=2,e.next=5,k.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,A(!1),e.finish(10);case 13:return e.next=15,k.getUser();case 15:a=e.sent,w(a),b(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,k.handleRedirectCallback();case 3:return e.next=5,k.getUser();case 5:t=e.sent,D(!1),b(!0),w(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(p.Provider,{value:{isAuthenticated:v,user:y,loading:x,popupOpen:T,loginWithPopup:F,handleRedirectCallback:L,getIdTokenClaims:function(){return k.getIdTokenClaims.apply(k,arguments)},loginWithRedirect:function(){return k.loginWithRedirect.apply(k,arguments)},getTokenSilently:function(){return k.getTokenSilently.apply(k,arguments)},getTokenWithPopup:function(){return k.getTokenWithPopup.apply(k,arguments)},logout:function(){return k.logout.apply(k,arguments)}}},t)},b=a(9),g=function(){var e=f(),t=e.isAuthenticated,a=e.loginWithRedirect,c=e.logout;return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light "},r.a.createElement("div",{className:"container-fluid row d-flex justify-content-end",id:"navbarNavAltMarkup"},r.a.createElement("h1",{className:"navbar-brand"},r.a.createElement(b.b,{to:"/"},"Classdotio")," by ",r.a.createElement("a",{href:"https://www.mikalyoung.com/",target:"_blank"}," Mikal Young")),r.a.createElement("ul",{className:"nav navbar-nav d-flex align-items-center flex-row-reverse col-3 ml-auto justify-content-start "},!t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a({})}},"Log in")),t&&r.a.createElement("li",{className:"nav-item ml-auto"},r.a.createElement("button",{className:"btn btn-outline-primary justify-self-end",onClick:function(){return c({returnTo:window.location.origin})}},"Log out")),t&&r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nav-item p-2"},r.a.createElement(b.b,{to:"/profile"},"Profile")),r.a.createElement("li",{className:"nav-item p-2"},r.a.createElement(b.b,{to:"/dashboard"},"Home"))))))},E=a(1),y=function(e){var t=e.component,a=e.path,c=Object(m.a)(e,["component","path"]),o=f(),l=o.loading,u=o.isAuthenticated,d=o.loginWithRedirect;Object(n.useEffect)((function(){l||u||function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({appState:{targetUrl:a}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l,u,d,a]);return r.a.createElement(E.a,Object.assign({path:a,render:function(e){return!0===u?r.a.createElement(t,e):null}},c))},w=function(){var e=f(),t=e.loading,a=e.user;return console.log("yikes"),t?r.a.createElement("div",null,"Loading..."):a?r.a.createElement(n.Fragment,null,console.log(a),r.a.createElement("img",{src:a.picture,alt:"Profile",style:{height:"100px"}}),r.a.createElement("h2",null,a.name),r.a.createElement("p",null,a.email),r.a.createElement("code",null,JSON.stringify(a,null,2))):r.a.createElement("div",null," not the user ")},j=a(5),O=Object(j.a)(),k=a(12),S=a(13),N=a(3),C=a(15),x=a(16),D=a(4),R=a.n(D),q=[];function T(){var e=[];return console.log("loading"),fetch("/payload",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.user)}).then((function(e){return e.json()})).then((function(t){e=t.result,console.log(e),e.forEach((function(e){"string"!=typeof e.pre?e.pre=e.pre:e.pre=JSON.parse(e.pre),e.completed&&q.push(e.area+" "+e.code)})),e=e.sort((function(e,t){return e.completed-t.completed}))})),e}var A={name:"",classcode:"",prereqs:"",nameError:"",classcodeError:"",prereqError:"",value:"",valid:!0,dropdowndb:[]},F=function(e){Object(x.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).state=A,n.handleChange=n.handleChange.bind(Object(N.a)(n)),n.codeChange=n.codeChange.bind(Object(N.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(N.a)(n)),n.validate=n.validate.bind(Object(N.a)(n)),n.onFocus=n.onFocus.bind(Object(N.a)(n)),n.onBlur=n.onBlur.bind(Object(N.a)(n)),n.changeState=n.changeState.bind(Object(N.a)(n)),n}return Object(S.a)(a,[{key:"handleChange",value:function(e){this.setState({name:e.target.value})}},{key:"changeState",value:function(e){}},{key:"codeChange",value:function(e){this.setState({classcode:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.validate()&&this.props.newclass(),this.setState({name:""}),this.setState({classcode:""}),this.setState({prereqs:""})}},{key:"validate",value:function(){this.setState({nameError:""}),this.setState({classcodeError:""});var e=1;return this.state.name||(this.setState({nameError:"name cannot be empty"}),this.setState({valid:!1}),e=0),this.state.classcode||(this.setState({classcodeError:"class code cannot be empty"}),this.setState({valid:!1}),e=0),1===e}},{key:"onFocus",value:function(){R()(".dropdown-container").removeClass("hide"),console.log(Date.now()),R()("#name").keyup((function(e){40===e.which&&console.log("yeet!")}))}},{key:"onBlur",value:function(){R()(document).ready((function(){R()(".dropdown-container").addClass("hide"),R()("#name").unbind("keyup")}))}},{key:"componentDidMount",value:function(){var e=this,t=new Headers;t.append("Accept","application/json"),fetch("/universaldb",{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(t){e.setState({dropdowndb:t})})).catch((function(e){console.log("fetch request is broken"),console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("form",{id:"classform",className:"",onSubmit:this.handleSubmit,autoComplete:"new-password"},r.a.createElement("div",{className:"form-group",style:{position:"relative"}},r.a.createElement("label",{htmlFor:"name"},"name"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"name",name:Date.now(),autoComplete:"new-password",className:this.state.nameError?"form-control incorrect":"form-control",value:this.state.name,onChange:this.handleChange,list:"options"}),r.a.createElement("div",{className:"errorMsg"},this.state.valid?"":this.state.nameError),""!==R()("#name").val()?r.a.createElement(L,{list:this.state.dropdowndb,type:"name"}):""),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"classcode"},"code"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"classcode",className:this.state.classcodeError?"incorrect":"form-control",value:this.state.classcode,onChange:this.codeChange}),r.a.createElement("div",{className:"errorMsg"},this.state.valid?"":this.state.classcodeError)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"classcode"},"completed:"),r.a.createElement("input",{type:"checkbox",name:"complete",id:"completed",className:"",style:{marginLeft:"20px"}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"prereqs"},"prereq(s):"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"prereqs",className:"form-control"})),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn btn-primary",form:"classform"},"submit"))}}]),a}(r.a.Component);function L(e){var t=e.type,a=e.list.filter((function(e){return"name"==t?e.name:"code"==t?e.area+" "+e.code:void 0})).map((function(e){return r.a.createElement("option",{value:e.name})}));return console.log(a),0!==a.length?r.a.createElement("datalist",{id:"options"},a):""}var M=function(e){Object(x.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).state={value:""},n.search=n.search.bind(Object(N.a)(n)),n.onKeyDown=n.onKeyDown.bind(Object(N.a)(n)),n}return Object(S.a)(a,[{key:"search",value:function(e){this.props.changeSearch(e.target.value)}},{key:"onKeyDown",value:function(e){8!==e.keyCode&&"Backspace"!==e.key||console.log("deleted")}},{key:"render",value:function(){return r.a.createElement("input",{className:"col-7 form-control",placeholder:"Search",name:"search",id:"search",onChange:this.search,value:this.props.searchtext,onKeyDown:this.onKeyDown})}}]),a}(r.a.Component),W=function(e){Object(x.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).state={searchtext:"",user:n.props.user,list:[],oglist:[]},n.changeSearch=n.changeSearch.bind(Object(N.a)(n)),n.onDelete=n.onDelete.bind(Object(N.a)(n)),n.newclass=n.newclass.bind(Object(N.a)(n)),n.duplicate=n.duplicate.bind(Object(N.a)(n)),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=(new XMLHttpRequest,[]);console.log("loading"),console.log(this.state.user),fetch("/payload",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.user)}).then((function(e){return e.json()})).then((function(a){t=a.result,console.log(t),t.forEach((function(e){"string"!=typeof e.pre?e.pre=e.pre:e.pre=JSON.parse(e.pre),e.completed&&q.push(e.area+" "+e.code)})),t=t.sort((function(e,t){return e.completed-t.completed})),e.setState({list:t,oglist:t})}))}},{key:"changeSearch",value:function(e){this.setState({searchtext:e}),""!==e?this.setState({list:this.state.oglist.filter((function(t){if(Object.values(t).toString().toLowerCase().includes(e.toLowerCase()))return console.log(Object.values(t)),t}))}):this.setState({list:this.state.oglist})}},{key:"onDelete",value:function(e){console.log("delete!"),console.log(e);var t=this.state.oglist.filter((function(t){if(e._id!=t._id)return t;var a=new XMLHttpRequest;a.open("POST","/delete",!0),a.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&this.status},a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(t))}));this.setState({oglist:t}),this.setState({list:t})}},{key:"newclass",value:function(){var e=this,t=[],a=Object.assign([],this.state.oglist),n=R()("#name").val().trim(),r=R()("#classcode").val().trim(" ").replace(/\s/g,""),c=r.substring(3,r.length),o=r.substring(0,3).toUpperCase(),l=R()("#completed").prop("checked");t=(t=(t=R()("#prereqs").val().toUpperCase().trim().split(",")).map((function(e){return(e=e.replace(/\s/g,"")).length%7!=0||0==e.length?null:e.slice(0,3)+" "+e.slice(3,e.length)}))).filter((function(e){return e})),console.log(t);var s=new XMLHttpRequest,i=function(e,t,a,n,r){var c={name:e,code:a,area:t,completed:n,pre:r,color:n?"blue":"red",rank:a};return n&&q.push(t+" "+a),c}(n,o,c,l,t);i.email=this.state.user.email,this.duplicate(i)?s.open("POST","/update",!0):(a.push(i),this.setState({oglist:a}),this.setState({list:a}),s.open("POST","/submit",!0)),R()("#name").val(""),R()("#classcode").val(""),R()("#completed").checked=!1,R()("#prereqs").val(""),s.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&this.status},s.setRequestHeader("Content-type","application/json"),console.log(i),s.send(JSON.stringify(i),(function(){e.setState({oglist:T()}),e.setState({list:T()})}))}},{key:"duplicate",value:function(e){var t=!1,a=this.state.oglist.map((function(a){return e.area==a.area&&e.code==a.code?(t=!0,e):a}));return this.setState({oglist:a}),this.setState({list:a}),t}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row mainbody col-12"},r.a.createElement("div",{className:"col-3"},r.a.createElement("div",{className:"card "},r.a.createElement("div",{className:"card-header"},r.a.createElement("h1",null,"Class Input")),r.a.createElement("div",{className:"card-body"},r.a.createElement(F,{newclass:this.newclass,list:this.state.oglist})))),r.a.createElement("div",{className:"col-7"},r.a.createElement("div",{className:"card",style:{height:"100%"}},r.a.createElement("div",{className:"d-flex card-header container align-items-center"},r.a.createElement("h1",{className:"col-4 "},"Classes"),r.a.createElement(M,{changeSearch:this.changeSearch,searchtext:this.state.searchtext})),r.a.createElement("div",{className:"card-body container-fluid",style:{overflow:"scroll",overflowX:"hidden"}},r.a.createElement("div",{className:"row"},r.a.createElement(H,{list:this.state.list,searchtext:this.state.searchtext,delete:this.onDelete})))))))}}]),a}(r.a.Component),H=function(e){Object(x.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).state={},console.log(n.props.list),n.removeClass=n.removeClass.bind(Object(N.a)(n)),n}return Object(S.a)(a,[{key:"removeClass",value:function(e){this.props.delete(e)}},{key:"render",value:function(){var e=this;return(this.props.list?this.props.list:[]).map((function(t){return console.log("loading "+t.name),r.a.createElement(J,{key:t.area.toString()+t.code.toString(),delete:e.removeClass,item2:t})}))}}]),a}(r.a.Component),J=function(e){Object(x.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(k.a)(this,a),n=t.call(this,e),console.log(n.props.item2),n.state=n.props.item2,n.onDelete=n.onDelete.bind(Object(N.a)(n)),n}return Object(S.a)(a,[{key:"onDelete",value:function(){console.log("item"),this.props.delete(this.props.item2)}},{key:"render",value:function(){var e=this;console.log(this.props.item2.name);var t=this.props.item2;return r.a.createElement("div",{id:t.area+"-"+t.code,className:K(t)+" classCard col-10 container offset-1"},r.a.createElement("div",{className:"row"},r.a.createElement("h3",{className:"col-xl-4 col-sm-4"},t.area+" "+t.code),r.a.createElement("h3",{className:"col-xl-7 col-sm-6"},t.name),r.a.createElement("img",{className:"col-xl-1 col-sm-2 deletebtn d-flex justify-content-end",src:"./assets/delete.svg",onClick:function(){e.onDelete()}})),r.a.createElement("div",{className:"row"},r.a.createElement("h4",{className:"col-8"},"pre-reqs: ",r.a.createElement(P,{pre:t.pre})," "),r.a.createElement("h4",{className:"col-4"},"completed: ",t.completed?"yes":"no")),r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-12"},"description: the course you need to learn all about ",t.name)))}}]),a}(r.a.Component);function P(e){return e.pre.map((function(e){return r.a.createElement("button",{type:"button",key:e.toString(),onClick:I,className:"btn btn-secondary",style:{marginRight:"3px"},value:e.replace(" ","-")},e," ")}))}function I(e){var t=e.target;document.getElementById(t.value).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}function K(e){var t=e.pre;if(e.completed)return e.color="blue",e.rank="1","blue";for(var a=0;a<t.length;a++)if(!q.includes(t[a]))return e.color="red",e.rank="3","red";return e.color="yellow",e.rank="2","yellow"}var U=W,B=function(){return console.log("Home"),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"mainbody"},r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("h1",{className:"col-6 text-center"},"Welcome To Class.io")),r.a.createElement("div",{className:"row d-flex  justify-content-center"},r.a.createElement("h4",{className:"col-8 text-center"},r.a.createElement("span",null,"    "),"Classdotio is an interactive Web Application using React, Node.js, Auth0, and MongoDB to visually tell users which classes they have taken, which classes they are eligible to take, and which classes they are unable to take. It uses the Auth0 SDK to enable user profile Authentication."))))};var X=function(){var e=f(),t=e.loading,a=e.isAuthenticated,n=e.user;return t?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"App container-fluid"},r.a.createElement(E.b,{history:O},r.a.createElement("header",null,r.a.createElement(g,null)),r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/"},a?r.a.createElement(U,{user:n}):r.a.createElement(B,null)),r.a.createElement(y,{exact:!0,path:"/dashboard"},r.a.createElement(U,{user:n})),r.a.createElement(E.a,{path:"/profile"},r.a.createElement(w,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(23);o.a.render(r.a.createElement(v,{domain:_.domain,client_id:_.clientId,redirect_uri:window.location.origin,onRedirectCallback:function(e){O.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(b.a,null,r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.27642d03.chunk.js.map